# 개발 진행 스냅샷 (meeting)

## 0. 문서 규칙
- 이 문서는 “현재 상태”를 빠르게 복원하기 위한 운영 문서
- 커밋 단위로 체크박스 업데이트 권장
- 다음 대화/작업 PC 변경 시 이 문서만 보면 바로 이어서 진행 가능

---

## 1. 개발 환경(확정)

- OS: Windows
- IDE: IntelliJ IDEA Community
- JDK: 17 LTS
- Build: Maven
- Server: Tomcat 10.1.x + Smart Tomcat
- DB: MySQL 8.0 (Docker Compose)
- DB Client: HeidiSQL
- Context Path: `/meeting`

---

## 2. 프로젝트 구조(현재)

### 2.1 루트 파일
- `pom.xml` (packaging=war)
- `docker-compose.yml`
- `db/schema.sql`
- `db/data.sql`

### 2.2 Web root
- `src/main/webapp/index.jsp`
- `src/main/webapp/WEB-INF/web.xml`

### 2.3 Java 패키지(확정)

```text
com.company.meeting
├─ common
│  └─ db
├─ user
│  ├─ dto
│  ├─ dao
│  └─ service
├─ room
│  ├─ dto
│  ├─ dao
│  └─ service
└─ reservation
   ├─ dto
   ├─ dao
   └─ service
```
---

## 3. Smart Tomcat 설정(현재 정답 세팅)

- Tomcat: 10.1.x
- Context path: `/meeting`
- Deployment directory: 프로젝트 루트 (예: `C:/JAVA/java_team/meeting`)
- Use classpath of module: `meeting`

### 확인 URL
- JSP: `http://localhost:8080/meeting/index.jsp`
- Servlet: `http://localhost:8080/meeting/hello`
- DB Test: `http://localhost:8080/meeting/db-test`

---

## 4. Docker(MySQL) 세팅(완료)

### 4.1 docker-compose.yml 핵심
- MySQL 8.0
- meeting_room DB 자동 생성
- TZ: Asia/Seoul
- charset/collation: utf8mb4
- schema.sql / data.sql 초기화 자동 실행
- volume: mysql_data

### 4.2 초기화 명령
- 최초 기동:
    - `docker-compose up -d`
- 완전 초기화(데이터까지 리셋):
    - `docker-compose down -v`
    - `docker-compose up -d`

---

## 5. DB 스키마/시드(완료)

### 5.1 schema.sql
- DB: meeting_room
- charset: utf8mb4
- table: user, room, reservation

### 5.2 data.sql (한글 깨짐 대응 포함)
- `SET NAMES utf8mb4;`
- `SET CHARACTER SET utf8mb4;`
- admin/user 초기 계정 insert

---

## 6. Maven 의존성(핵심)

- servlet-api:
    - `jakarta.servlet-api` (scope=provided)
- MySQL JDBC:
    - `com.mysql:mysql-connector-j:8.0.33`

---

## 7. JDBC 연결(완료)

### 7.1 이슈
- Smart Tomcat + JDK 17 환경에서 DriverManager 자동 인식 실패 발생

### 7.2 해결
- DBConnection에서 Driver 강제 등록:
    - `DriverManager.registerDriver(new com.mysql.cj.jdbc.Driver());`

### 7.3 결과
- `/meeting/db-test` → `DB CONNECT OK` 확인 완료

---

## 8. 완료 체크리스트(현재까지)

### 환경
- [x] JDK 17 설정
- [x] Maven 프로젝트 생성(war)
- [x] Smart Tomcat 실행
- [x] JSP 출력 확인
- [x] Servlet(/hello) 확인

### DB
- [x] Docker MySQL 기동
- [x] schema.sql 자동 적용
- [x] data.sql 자동 적용
- [x] 한글 깨짐 해결
- [x] JDBC 연결 OK

---

## 9. 커밋 스냅샷(권장 단위)

### 커밋(현재 하려는 단위)
- docker-compose.yml 추가/확정
- db/schema.sql 추가/확정
- db/data.sql(utf8mb4 SET NAMES 포함) 확정
- “Docker DB 자동 초기화 + 한글 깨짐 해결”까지 포함

---

## 10. 다음 구현 순서(다음 작업)

### 10.1 DAO 단위 구현(다음)
- 목표:
    - DAO/Service/DTO 계층 정리
    - CRUD 단위 테스트(간단 Servlet 또는 main 테스트) 진행

### 10.2 로그인/세션
- /auth/login GET/POST
- 세션 저장
- /auth/logout

### 10.3 권한 필터
- /admin/* → ADMIN만
- /user/* → USER/ADMIN 정책 선택

### 10.4 회의실 CRUD(관리자)
- room DAO/Service/Servlet
- JSP 화면

### 10.5 예약(사용자)
- reservation 중복 체크 로직 구현
- 인덱스 추가 검토

### 10.6 채팅(WebSocket)
- room_id 단위 채널
- (옵션) chat_message 저장

---

## 11. 다음 대화에서 시작 문구(추천)
- “meeting 스냅샷 기준으로 DAO부터 구현 시작하자”
